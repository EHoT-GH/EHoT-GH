function initData(t){var e=[];return(conditionArray=void 0!==localStorage.conditionArray?JSON.parse(localStorage.getItem("conditionArray")):[]).length>0?t.forEach(function(t,i){t.isActive=i===conditionArray.length,i<conditionArray.length&&(t.filled=!0),e.push(t)}):t.forEach(function(t,i){e.push(t)}),e}function Elem(t,e,i,n,o){var l=document.createElement(t);if(l.id=e,"object"==typeof i?i.forEach(function(t,e){l.classList.add(i[e])}):"string"==typeof i?""!==i?l.classList.add(i):console.warn("В классы стилей передана пустая строка",e):console.warn("Входные данные для кнопки не соответствуют формату!",i),void 0!==n&&("object"==typeof n?n.forEach(function(t,e){l.appendChild(n[e])}):l.innerText=n),void 0===o)console.warn("В создаваемом элементе не предусмотрены атрибуты.",e);else if("object"==typeof o)for(var a in o)l.setAttribute(a,o[a]);else console.warn("Входные данные для кнопки не соответствуют формату!",o);return l}function initButtons(){var t=document.getElementById("buttons");if(data.length!==conditionArray.length)appendElements(t,[new Elem("button","prev","btn","ПРЕДЫДУЩИЙ ",{onclick:"prevPage()",disabled:!0}),new Elem("button","next","btn","СЛЕДУЮЩИЙ ",{onclick:"nextPage()",disabled:!0})]);else{for(;t.firstChild;)t.removeChild(t.firstChild);appendElements(t,[new Elem("button","prev","btn","НАЗАД ",{onclick:"reStart()"})])}}function configButtons(t,e){if(data.length!==conditionArray.length){var i=document.getElementById("next"),n=document.getElementById("prev");t?(n.removeAttribute("disabled"),n.setAttribute("onclick","prevPage()")):(n.removeAttribute("onclick"),n.setAttribute("disabled","true")),e?(i.removeAttribute("disabled"),i.setAttribute("onclick","nextPage()")):e&&void 0!==e||(console.log(void 0===e),i.removeAttribute("onclick"),i.setAttribute("disabled","true"))}}function buttonsCondition(t){var e=data;if(void 0===e[t])conditionArray.length>0?configButtons(!0,!1):configButtons(!1,!1);else{if(!e[t].filled)return configButtons(!0,!1),!1;0===conditionArray.length?configButtons(!1,!0):conditionArray.length-1===data.length?configButtons(!0,!1):t<1?configButtons(!1,!0):configButtons(!0,!0)}void 0===t&&configButtons(!1)}function initProgressBar(){function t(t){return null===document.getElementById(t)?new Elem("div",t,""):document.getElementById(t)}function e(t){return parseInt(t.replace(/\D+/g,""))}var i=data,n={tag:"div",id:"point",classes:["point"],styles:{width:"42px",height:"42px",lineHeight:"42px"},spaceBetween:"100"},o=document.getElementById("progress-bar");conditionArray.length>0&&void 0!==o&&o.children.remove();var l=new Elem("div","points","points");i.forEach(function(t,e){var i=e+1,o=new Elem(n.tag,n.id+e,n.classes,i);for(var a in n.styles)o.style[a]=n.styles[a];conditionArray.length>e&&o.classList.add("checked"),l.appendChild(o)}),o.appendChild(l);var a=t("progress-line"),r=t("empty-progress-line"),c=e(n.styles.width)+e(n.spaceBetween),d=i.length*c-e(n.spaceBetween);if(void 0===o)a.style.width=0,r.style.width=0;else{for(var s in i)i[s].isActive&&(a.style.width=c*s+"px");r.style.width=d+"px"}o.style.width=d+"px",appendElements(o,[a,r])}function parseCheckList(){var t=document.getElementById("check-list");for(var e in checkListInner){var i=new Elem("div",checkListInner[e]);t.appendChild(i)}}function parseTitle(){var t,e=data,i=document.getElementById("header");i.childNodes.length>0&&i.childNodes.remove(),e.length===conditionArray.length?(t=new Elem("h3","mainTitle","","Вы выбрали эти элименты: "),i.appendChild(t)):e.forEach(function(e,n){e.isActive&&(t=new Elem("h3","mainTitle","",e.title),i.appendChild(t))})}function parseContent(t,e){function i(t){for(r=document.getElementById("content");r.firstChild;)r.removeChild(r.firstChild);t.forEach(function(e,i){n=t===conditionArray?new Elem("div","item"+i,"item","",{tooltip:"id: "+e.id}):new Elem("div","item"+i,"item","",{onclick:"onSelect("+c+","+i+")"}),o=new Elem("div","title"+i,"title",t[i].title),l=new Elem("div","desc"+i,"desc",t[i].value),a=new Elem("img","img"+i,"images","",{src:t[i].imgSrc}),appendElements(n,[a,o,l]),appendElements(r,[n])}),r.style.gridTemplateColumns="repeat("+t.length+", 1fr)"}var n,o,l,a,r,c=0;conditionArray.length===t.length||(conditionArray.length>0?t[conditionArray.length-1].isActive&&(e=conditionArray.length):e>t.length?i(conditionArray):e=0),e>=0&&t.forEach(function(i,n){c=t[n].isActive?n:e}),i(e<t.length?t[c].children:conditionArray),void 0!==t[c]&&t[c].filled&&conditionArray.forEach(function(t,e){c===e&&document.getElementById("item"+t.id).classList.add("selected")}),parseTitle()}function showResult(){var t=conditionArray;parseContent(t,t.length+1)}function appendElements(t,e){"object"==typeof e?e.forEach(function(e,i){t.appendChild(e)}):"string"==typeof e&&t.appendChild(e)}function prevPage(){var t,e=data;e.forEach(function(e,i){data[i].isActive&&(t=i)});var i=t-1;data[t].isActive=!1,data[i].isActive=!0,initProgressBar(),parseContent(e,i),buttonsCondition(i)}function nextPage(){var t,e,i,n=data;if(n.forEach(function(t,i){i===n.length?showResult():void 0!==n[i]&&n[i].isActive&&(e=i)}),e===n.length)return showResult(),!1;n[e].children.forEach(function(e,n){void 0!==(i=document.getElementById("item"+n))&&i.classList.contains("selected")&&(t=n)}),void 0===t&&(t=-1),void 0!==n[e+1]&&(n[e+1].isActive=!0),n[e].isActive=!1,n[e].filled=!0,onCheck(e,t),parseContent(n,e+1),initProgressBar(),buttonsCondition(e+1)}function onCheck(t,e){var i=data;i[t].active=!1,conditionArray[t]=i[t].children[e],conditionArray[t].id=e,localStorage.conditionArray=JSON.stringify(conditionArray),initProgressBar(),buttonsCondition(t),i.length===conditionArray.length&&initButtons()}function onSelect(t,e){var i=data[t].children,n=document.getElementById("item"+e),o=document.getElementById("point"+t);if(n.classList.contains("selected"))return n.classList.remove("selected"),o.classList.remove("checked"),data[t].filled=!1,buttonsCondition(t),!1;i.forEach(function(t,e){(n=document.getElementById("item"+e)).classList.contains("selected")&&n.classList.remove("selected")}),o.classList.add("checked"),(n=document.getElementById("item"+e)).classList.add("selected"),data[t].filled=!0,buttonsCondition(t)}function reStart(){localStorage.clear(),location.reload()}function initCheckList(){parseCheckList(),initProgressBar(),parseTitle(),parseContent(data),initButtons(),buttonsCondition()}Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var t=this.length-1;t>=0;t--)this[t]&&this[t].parentElement&&this[t].parentElement.removeChild(this[t])};var inputData=[{title:"Dolore occaecat consequat sunt sunt laborum?",isActive:!0,filled:!1,children:[{title:"Morgan Vinson",value:"$1,337.48",imgSrc:"http://placehold.it/128x128"},{title:"Cristina Chandler",value:"$1,582.00",imgSrc:"http://placehold.it/128x128"},{title:"Henderson Garza",value:"$3,807.52",imgSrc:"http://placehold.it/128x128"},{title:"Ola Holloway",value:"$3,093.86",imgSrc:"http://placehold.it/128x128"}]},{title:"Velit laborum consectetur anim labore sit?",isActive:!1,filled:!1,children:[{title:"Rachelle Fuentes",value:"$3,834.48",imgSrc:"http://placehold.it/128x128"},{title:"Sutton Sheppard",value:"$1,433.59",imgSrc:"http://placehold.it/128x128"},{title:"Patterson Sharpe",value:"$1,124.84",imgSrc:"http://placehold.it/128x128"}]},{title:"Proident do exercitation officia amet nostrud?",isActive:!1,filled:!1,children:[{title:"Mckay Wise",value:"$1,719.79",imgSrc:"http://placehold.it/128x128"},{title:"Sears Shepherd",value:"$1,906.60",imgSrc:"http://placehold.it/128x128"}]},{title:"Consectetur pariatur labore incididunt est non?",isActive:!1,filled:!1,children:[{title:"Charmaine Wilson",value:"$3,186.62",imgSrc:"http://placehold.it/128x128"},{title:"Cash Mcmahon",value:"$1,392.91",imgSrc:"http://placehold.it/128x128"},{title:"Reba Caldwell",value:"$3,982.22",imgSrc:"http://placehold.it/128x128"},{title:"Vargas Parks",value:"$1,307.28",imgSrc:"http://placehold.it/128x128"},{title:"Barber Wiley",value:"$3,916.93",imgSrc:"http://placehold.it/128x128"}]},{title:"Dolore dolor deserunt occaecat pariatur labore incididunt est dolore consequat?",isActive:!1,filled:!1,children:[{title:"Larson Salinas",value:"$1,170.63",imgSrc:"http://placehold.it/128x128"},{title:"Deidre Pope",value:"$3,856.84",imgSrc:"http://placehold.it/128x128"},{title:"Marquita Medina",value:"$1,850.20",imgSrc:"http://placehold.it/128x128"},{title:"Crawford Sharp",value:"$3,378.47",imgSrc:"http://placehold.it/128x128"},{title:"Gould Mcintosh",value:"$3,242.41",imgSrc:"http://placehold.it/128x128"},{title:"Lott Christian",value:"$3,123.78",imgSrc:"http://placehold.it/128x128"}]}],checkListInner={progressBar:"progress-bar",header:"header",content:"content",buttons:"buttons"},data=initData(inputData),conditionArray;initCheckList();
